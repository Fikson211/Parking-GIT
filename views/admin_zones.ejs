<%- include('partials/header', { title: 'Зоны', user }) %>

<div class="card">
  <div class="topbar">
    <div class="pill">Админ-панель</div>
    <div class="nav">
      <a href="/" class="pill">Дашборд</a>
      <a href="/logs" class="pill">Журнал</a>
      <a href="/admin/users" class="pill">Пользователи</a>
      <a href="/admin/zones" class="pill" style="background:rgba(255,255,255,.12)">Зоны</a>
      <a href="/admin/devices" class="pill">Устройства</a>
      <a href="/admin/audit" class="pill">Аудит</a>
      <a href="/logout" class="pill">Выйти</a>
    </div>
  </div>

  <h2>Зоны</h2>

  <form method="POST" action="/admin/zones" style="display:grid;grid-template-columns:1fr 140px 180px;gap:10px;align-items:end;">
    <div>
      <label class="muted">Название</label>
      <input name="name" placeholder="Новая зона" style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);color:#fff;" required />
    </div>
    <div>
      <label class="muted">Сорт.</label>
      <input name="sort" type="number" value="0" style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);color:#fff;" />
    </div>
    <div>
      <label class="muted">Активна</label>
      <select name="is_active" style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:rgba(20,20,25,.9);color:#fff;">
        <option value="true">true</option>
        <option value="false">false</option>
      </select>
    </div>
    <button class="btn" style="grid-column:1/-1;margin-top:8px">Добавить</button>
  </form>

  <div style="margin-top:16px;overflow:auto">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th><th>Название</th><th>sort</th><th>active</th><th></th>
        </tr>
      </thead>
      <tbody>
        <% zones.forEach(z => { %>
          <tr>
            <td><%= z.id %></td>
            <td><%= z.name %></td>
            <td><%= z.sort || 0 %></td>
            <td><%= (z.is_active === false) ? 'false' : 'true' %></td>
            <td>
              <form method="POST" action="/admin/zones/<%= z.id %>/delete" onsubmit="return confirm('Удалить зону?')">
                <button class="btn" style="padding:8px 10px;background:rgba(255,70,70,.25);">Удалить</button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<%- include('partials/footer') %>
